<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CrossDrop</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <h1>CrossDrop</h1>
    <div id="status">Disconnected</div>
  </header>
  <main>
    <!-- HOME VIEW -->
    <section id="homeView">
      <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
        <button id="navSendBtn" class="big-btn">üöÄ Sender</button>
        <button id="navReceiveBtn" class="big-btn">üì• Receiver</button>
      </div>
    </section>

    <!-- SEND VIEW -->
    <section id="sendView" class="hidden">
      <button class="backBtn" data-target="homeView">‚Üê Back</button>
      <section id="devices">
        <h2>Nearby Devices</h2>
        <ul id="deviceList"></ul>
      </section>

      <section id="transfer">
        <h2>Send File</h2>
        <input id="fileInput" type="file" />
        <select id="targetSelect">
          <option value="">Select device</option>
        </select>
        <button id="sendBtn">Send</button>

        <div id="progressArea" class="hidden">
          <div id="fileName"></div>
          <progress id="progress" max="100" value="0"></progress>
          <div id="speed">0 KB/s</div>
          <div id="connStatus">Idle</div>
        </div>
      </section>

      <section id="pairing">
        <h2>Scan Receiver QR</h2>
        <div><button id="scanBtn">Scan QR</button></div>
        <div id="scanner" class="hidden">
          <video id="video" autoplay playsinline></video>
          <canvas id="canvas" class="hidden"></canvas>
          <button id="stopScan">Stop</button>
        </div>
        <div>
          <input id="pairInput" placeholder="Enter device ID" />
          <button id="pairBtn">Pair Manually</button>
        </div>
      </section>
    </section>

    <!-- RECEIVE VIEW -->
    <section id="receiveView" class="hidden">
      <button class="backBtn" data-target="homeView">‚Üê Back</button>
      <section id="pairing">
        <h2>Receive Files</h2>
        <div>Your Device ID: <code id="deviceId">...</code></div>
        <div id="qrWrap"><img id="qrImg" alt="QR" /></div>
        <h3>Trusted Devices</h3>
        <ul id="trustedList"></ul>
      </section>
    </section>

    <section id="settings">
      <label><input id="darkToggle" type="checkbox"> Dark mode</label>
    </section>

    <section id="errors"></section>
  </main>

  <script src="qrcode.min.js"></script>
  <script src="jsQR.min.js"></script>
  <script src="webrtc.js"></script>
  <script src="popup.js"></script>
  <footer style="text-align: center; font-size: 0.8em; color: #666; padding: 10px;">v1.0.3</footer>
</body>

</html>